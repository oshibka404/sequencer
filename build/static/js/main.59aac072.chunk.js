(this.webpackJsonpsequencer=this.webpackJsonpsequencer||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(4),i=n.n(r),u=(n(11),n(1)),s=(n(12),["C6","A#5","G5","F5","D#5","C5","A#4","G4","F4","D#4","C4"]),o={C2:65.41,"C#2":69.3,D2:73.42,"D#2":77.78,E2:82.41,F2:87.31,"F#2":92.5,G2:98,"G#2":103.83,A2:110,"A#2":116.54,B2:123.47,C3:130.81,"C#3":138.59,D3:146.83,"D#3":155.56,E3:164.81,F3:174.61,"F#3":185,G3:196,"G#3":207.65,A3:220,"A#3":233.08,B3:246.94,C4:261.63,"C#4":277.18,D4:293.66,"D#4":311.13,E4:329.63,F4:349.23,"F#4":369.99,G4:392,"G#4":415.3,A4:440,"A#4":466.16,B4:493.88,C5:523.25,"C#5":554.37,D5:587.33,"D#5":622.25,E5:659.25,F5:698.46,"F#5":739.99,G5:783.99,"G#5":830.61,A5:880,"A#5":932.33,B5:987.77,C6:1046.5},l=(n(13),n(14),function(e){return c.a.createElement("div",{className:"Step ".concat(e.isCurrent?"Step-current":""),onMouseDown:function(t){0===t.button?(e.toggleStep(t),e.setIsEditing(!0)):2===t.button&&(e.toggleGhost(t),e.setIsGhostEditing(!0))},onContextMenu:function(e){e.preventDefault()},onMouseEnter:function(t){e.isEditing&&e.toggleStep(t)},onDoubleClick:function(t){e.toggleAccent(t)}},c.a.createElement("div",{className:"Step-content ".concat(e.value>0?"Step-active":""),style:{opacity:e.value?.1+.9*e.value:1}}))}),m=n(2),p=n.n(m),f=n(5),d=new AudioContext,g=d.createGain(),E=d.createBiquadFilter(),b=d.createConvolver(),v=d.createGain(),h=d.createDynamicsCompressor();E.frequency.value=8e3,E.connect(b),b.connect(v),v.connect(h),E.connect(g),g.connect(h),h.connect(d.destination),h.threshold.value=-40,h.knee.value=7,v.gain.value=.5,g.gain.value=.7;var S=d;fetch("https://raw.githubusercontent.com/afuh/sequencer/master/assets/Large%20Long%20Echo%20Hall.wav").then(function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,t.arrayBuffer();case 3:e.t1=e.sent,e.t2=function(e){b.buffer=e},e.t3=function(e){return"Error with decoding audio data"+e},e.t0.decodeAudioData.call(e.t0,e.t1).then(e.t2).catch(e.t3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var C=function(e){var t=Object(a.useState)(),n=Object(u.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(),o=Object(u.a)(s,2),m=o[0],p=o[1],f=Object(a.useState)(e.initialTrack),d=Object(u.a)(f,2),g=d[0],b=d[1];function v(e,t){g.steps.splice(e,1,t),b(Object.assign({},g,{steps:g.steps}))}return Object(a.useEffect)((function(){b(e.initialTrack)}),[e.initialTrack]),Object(a.useEffect)((function(){if(null!==e.currentStep){var t=g.steps[e.currentStep];t&&m&&(m.gain.cancelScheduledValues(S.currentTime),m.gain.setValueAtTime(m.gain.value?m.gain.value:1e-6,S.currentTime),m.gain.exponentialRampToValueAtTime(t,S.currentTime+.1),m.gain.exponentialRampToValueAtTime(1e-6,S.currentTime+.3))}}),[e.currentStep,m,g.steps]),Object(a.useEffect)((function(){r&&m?(r.frequency.value=g.pitch,r.connect(m),m.connect(E),m.gain.value=1e-6,r.start()):(i(S.createOscillator()),p(S.createGain()))}),[r,m,g.pitch]),c.a.createElement("div",{className:"TrackView"},c.a.createElement("div",{className:"TrackTitle"},g.name),g.steps.map((function(t,n){return c.a.createElement(l,{key:n,value:t,pitch:g.pitch,isCurrent:e.currentStep===n,toggleStep:function(){return v(n,t?0:.1)},toggleAccent:function(){return v(n,1===t?0:1)},toggleGhost:function(){return v(n,.01===t?0:.01)},setIsEditing:e.setIsEditing,isEditing:e.isEditing,setIsGhostEditing:e.setIsGhostEditing,isGhostEditing:e.isGhostEditing})})))},O=(n(16),16),j=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(e.currentStep),r=e.isPlaying,i=e.tempo,u=e.setCurrentStep;return Object(a.useEffect)((function(){window.clearInterval(t.current)}),[i]),Object(a.useEffect)((function(){null===e.currentStep&&(n.current=null)}),[e.currentStep]),Object(a.useEffect)((function(){if(r){S.resume();var e=6e4/i/4;t.current=window.setInterval((function(){null===n.current&&(n.current=0),u(n.current++%O)}),e)}else window.clearInterval(t.current)}),[r,i,u]),c.a.createElement("div",{className:"Sequencer"},c.a.createElement("div",{className:"Sequencer-header"},c.a.createElement("div",{className:"Sequencer-stepNumbers"},c.a.createElement("div",{className:"Sequencer-stepNumber"}),new Array(O).fill(0).map((function(e,t){return c.a.createElement("div",{className:"Sequencer-stepNumber",key:t},t+1)})))),c.a.createElement("div",{className:"Sequencer-body"},e.sequence.map((function(t){return c.a.createElement(C,{key:t.pitch,initialTrack:t,currentStep:e.currentStep,isEditing:e.isEditing,setIsEditing:e.setIsEditing,isGhostEditing:e.isGhostEditing,setIsGhostEditing:e.setIsGhostEditing})}))))};function G(){return s.map((function(e){return{pitch:o[e],name:e,steps:new Array(O).fill(0)}}))}var w=function(){var e=Object(a.useState)(G()),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),l=Object(u.a)(i,2),m=l[0],p=l[1],f=Object(a.useState)(100),d=Object(u.a)(f,2),g=d[0],E=d[1],b=Object(a.useState)(!1),v=Object(u.a)(b,2),h=v[0],S=v[1],C=Object(a.useState)(!1),w=Object(u.a)(C,2),k=w[0],y=w[1],A=Object(a.useState)(null),N=Object(u.a)(A,2),I=N[0],D=N[1];return c.a.createElement("div",{className:"App",onMouseUp:function(e){S(!1),y(!1)}},c.a.createElement("div",{className:"controls"},c.a.createElement("button",{className:"Controls-button ".concat(m?"Pause":"Play"),title:m?"Pause":"Play",onClick:function(){return p(!m)}}),c.a.createElement("button",{className:"Controls-button Stop",title:"Stop",onClick:function(){D(null),p(!1)}}),c.a.createElement("div",null,c.a.createElement("input",{type:"number",value:g,onChange:function(e){return E(parseInt(e.target.value))}}),"bpm"),c.a.createElement("button",{className:"Controls-button Clear",title:"Clear",onClick:function(){return r(G())}}),c.a.createElement("button",{onClick:function(){return r(s.map((function(e){return{pitch:o[e],name:e,steps:new Array(O).fill(0).map((function(){return Math.random()<.125?Math.random():0}))}})))}},"Randomize")),c.a.createElement(j,{sequence:n,isEditing:h,setIsEditing:S,currentStep:I,tempo:g,setCurrentStep:D,isPlaying:m,isGhostEditing:k,setIsGhostEditing:y}),c.a.createElement("div",{className:"help"},"Left click: toggle step; ",c.a.createElement("br",null),"Right click: toggle ghost note; ",c.a.createElement("br",null),"Double click: put an accent; ",c.a.createElement("br",null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.59aac072.chunk.js.map